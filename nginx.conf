events {}
http {
  include    mime.types;
  error_log /dev/stdout info;
  include /etc/nginx/sites-enabled/*;
  server {
    access_log /dev/stdout;
    listen 8080;
    
    # Definujeme root adresář pro statické soubory
    root /usr/share/nginx/html;
    index index.html;

    ssi on;
    ssi_types *;

    # Servírování HTML souborů
    location / {
      try_files $uri $uri/ =404;
    }

    # Servírování CSS, JS a dalších assets
    location ~* \.(css|js|png|jpg|jpeg|gif|ico|woff2?|ttf|svg|eot)$ {
      expires max;
      log_not_found off;
    }

    location ~ \.css {
      # add_header  Content-Type    text/css;
    } 

    # nested routes 
    rewrite ^/api-catalog/api/(.*)$ /api/$1.html last;
    # other assets like JS and CSS
    rewrite ^/api-catalog(.+)$ $1 last;
    # index route
    rewrite ^/api-catalog$ / last;
  }
}
